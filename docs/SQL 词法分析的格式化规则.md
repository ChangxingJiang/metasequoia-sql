状态机开发经验：

- 使用一个类来维护状态机的所有上下文
- 使用一个类来封装遍历过程，因为并不一定每一次循环都需要指针变化，有时可能将一次循环拆分为两个步骤更合适，但其中只有一个步骤会进行指针变化
- 状态转移的逻辑尽可能集成在上下文类中，在更外层只负责判断和调用，而不在最外层直接指定状态
- 将所有的状态转移都放在最外层显式表达
